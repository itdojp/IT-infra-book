<svg viewBox="0 0 800 600" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .diagram-text { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji'; font-size: 11px; fill: var(--color-text-primary, #1a1a1a); }
      .diagram-title { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji'; font-size: 16px; font-weight: bold; fill: var(--color-text-primary, #1a1a1a); }
      .segment { fill: var(--color-bg-secondary, #f8f9fa); stroke: var(--color-border, #dee2e6); stroke-width: 2; stroke-dasharray: 5,5; }
      .web-tier { fill: var(--color-primary-light, #e3f2fd); stroke: var(--color-primary, #1976d2); stroke-width: 2; }
      .app-tier { fill: var(--color-secondary-light, #f3e5f5); stroke: var(--color-secondary, #7b1fa2); stroke-width: 2; }
      .db-tier { fill: var(--color-accent-light, #fff3e0); stroke: var(--color-accent, #ff6b35); stroke-width: 2; }
      .mgmt-tier { fill: var(--color-warning-light, #fff8e1); stroke: var(--color-warning, #f57c00); stroke-width: 2; }
      .firewall { fill: var(--color-error-light, #ffebee); stroke: var(--color-error, #d32f2f); stroke-width: 2; }
      .allowed-flow { stroke: var(--color-success, #2e7d32); stroke-width: 2; fill: none; marker-end: url(#allowed); }
      .blocked-flow { stroke: var(--color-error, #d32f2f); stroke-width: 2; fill: none; stroke-dasharray: 3,3; }
    </style>
    <marker id="allowed" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="var(--color-success, #2e7d32)" />
    </marker>
  </defs>
  
  <!-- Background -->
  <rect width="800" height="600" fill="var(--color-bg-primary, #ffffff)"/>
  
  <!-- Title -->
  <text x="400" y="30" text-anchor="middle" class="diagram-title">図10.1: マイクロセグメンテーション実装</text>
  
  <!-- Traditional vs Microsegmentation comparison -->
  <text x="200" y="60" text-anchor="middle" class="diagram-title">従来のセグメンテーション</text>
  <text x="600" y="60" text-anchor="middle" class="diagram-title">マイクロセグメンテーション</text>
  
  <!-- Traditional Segmentation (Left Side) -->
  <rect x="50" y="80" width="300" height="200" class="segment"/>
  <text x="200" y="100" text-anchor="middle" class="diagram-text">DMZ</text>
  
  <rect x="70" y="120" width="60" height="40" class="web-tier"/>
  <text x="100" y="135" text-anchor="middle" class="diagram-text">Web1</text>
  <text x="100" y="150" text-anchor="middle" class="diagram-text">Web2</text>
  
  <rect x="160" y="120" width="60" height="40" class="app-tier"/>
  <text x="190" y="135" text-anchor="middle" class="diagram-text">App1</text>
  <text x="190" y="150" text-anchor="middle" class="diagram-text">App2</text>
  
  <rect x="250" y="120" width="60" height="40" class="db-tier"/>
  <text x="280" y="135" text-anchor="middle" class="diagram-text">DB1</text>
  <text x="280" y="150" text-anchor="middle" class="diagram-text">DB2</text>
  
  <rect x="50" y="300" width="300" height="100" class="segment"/>
  <text x="200" y="320" text-anchor="middle" class="diagram-text">内部ネットワーク</text>
  
  <rect x="70" y="340" width="60" height="40" class="mgmt-tier"/>
  <text x="100" y="355" text-anchor="middle" class="diagram-text">管理</text>
  <text x="100" y="370" text-anchor="middle" class="diagram-text">サーバー</text>
  
  <!-- Firewall between segments -->
  <rect x="180" y="285" width="40" height="20" class="firewall"/>
  <text x="200" y="298" text-anchor="middle" class="diagram-text">FW</text>
  
  <!-- Microsegmentation (Right Side) -->
  <!-- Web Tier Microsegments -->
  <rect x="450" y="80" width="80" height="60" class="web-tier"/>
  <text x="490" y="105" text-anchor="middle" class="diagram-text">Web1</text>
  <text x="490" y="120" text-anchor="middle" class="diagram-text">セグメント</text>
  
  <rect x="550" y="80" width="80" height="60" class="web-tier"/>
  <text x="590" y="105" text-anchor="middle" class="diagram-text">Web2</text>
  <text x="590" y="120" text-anchor="middle" class="diagram-text">セグメント</text>
  
  <!-- App Tier Microsegments -->
  <rect x="450" y="160" width="80" height="60" class="app-tier"/>
  <text x="490" y="185" text-anchor="middle" class="diagram-text">App1</text>
  <text x="490" y="200" text-anchor="middle" class="diagram-text">セグメント</text>
  
  <rect x="550" y="160" width="80" height="60" class="app-tier"/>
  <text x="590" y="185" text-anchor="middle" class="diagram-text">App2</text>
  <text x="590" y="200" text-anchor="middle" class="diagram-text">セグメント</text>
  
  <!-- DB Tier Microsegments -->
  <rect x="450" y="240" width="80" height="60" class="db-tier"/>
  <text x="490" y="265" text-anchor="middle" class="diagram-text">DB1</text>
  <text x="490" y="280" text-anchor="middle" class="diagram-text">セグメント</text>
  
  <rect x="550" y="240" width="80" height="60" class="db-tier"/>
  <text x="590" y="265" text-anchor="middle" class="diagram-text">DB2</text>
  <text x="590" y="280" text-anchor="middle" class="diagram-text">セグメント</text>
  
  <!-- Management Microsegment -->
  <rect x="650" y="160" width="80" height="60" class="mgmt-tier"/>
  <text x="690" y="185" text-anchor="middle" class="diagram-text">管理</text>
  <text x="690" y="200" text-anchor="middle" class="diagram-text">セグメント</text>
  
  <!-- Traffic flows for microsegmentation -->
  <line x1="490" y1="140" x2="490" y2="160" class="allowed-flow"/>
  <line x1="590" y1="140" x2="590" y2="160" class="allowed-flow"/>
  <line x1="490" y1="220" x2="490" y2="240" class="allowed-flow"/>
  <line x1="590" y1="220" x2="590" y2="240" class="allowed-flow"/>
  
  <!-- Blocked flows (dotted lines) -->
  <line x1="530" y1="110" x2="550" y2="110" class="blocked-flow"/>
  <line x1="530" y1="190" x2="550" y2="190" class="blocked-flow"/>
  <line x1="530" y1="270" x2="550" y2="270" class="blocked-flow"/>
  
  <!-- Benefits section -->
  <text x="400" y="350" text-anchor="middle" class="diagram-title">マイクロセグメンテーションの利点</text>
  
  <rect x="50" y="370" width="700" height="180" fill="var(--color-bg-secondary, #f8f9fa)" stroke="var(--color-border, #dee2e6)" stroke-width="1"/>
  
  <text x="70" y="395" class="diagram-text" font-weight="bold">セキュリティ強化:</text>
  <text x="70" y="415" class="diagram-text">• 各ワークロード間に個別のセキュリティ境界</text>
  <text x="70" y="435" class="diagram-text">• 侵害の横移動を阻止</text>
  <text x="70" y="455" class="diagram-text">• 最小権限の原則を実装</text>
  
  <text x="400" y="395" class="diagram-text" font-weight="bold">運用効率:</text>
  <text x="400" y="415" class="diagram-text">• アプリケーション中心の保護</text>
  <text x="400" y="435" class="diagram-text">• 動的なポリシー適用</text>
  <text x="400" y="455" class="diagram-text">• コンプライアンス要件への対応</text>
  
  <text x="70" y="485" class="diagram-text" font-weight="bold">実装技術:</text>
  <text x="70" y="505" class="diagram-text">• ソフトウェア定義境界（Software-Defined Perimeter）</text>
  <text x="70" y="525" class="diagram-text">• 分散ファイアウォール（NSX-T、Calico等）</text>
  
  <!-- Accessibility -->
  <title>マイクロセグメンテーション実装</title>
  <desc>従来のネットワークセグメンテーションとマイクロセグメンテーションの比較図</desc>
</svg>